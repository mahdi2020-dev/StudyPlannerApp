. ØªÙ†Ø¸ÛŒÙ… Firebase Firestore
ğŸ”¹ Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² Firebase Ø±Ø§ Ø¨Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§Øª Ø§Ø¶Ø§ÙÙ‡ Ù†Ú©Ø±Ø¯ÛŒØŒ Ø§ÛŒÙ† Ù…Ø±Ø§Ø­Ù„ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡:

Ø¨Ù‡ Ú©Ù†Ø³ÙˆÙ„ Firebase Ø¨Ø±Ùˆ â†’ console.firebase.google.com
ÛŒÚ© Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø³Ø§Ø² (ÛŒØ§ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†)
Firestore Database Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†:
Ø¨Ù‡ Build > Firestore Database Ø¨Ø±Ùˆ
Ø±ÙˆÛŒ Create Database Ú©Ù„ÛŒÚ© Ú©Ù†
Ø­Ø§Ù„Øª Production Mode Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†
Ù…Ù†Ø·Ù‚Ù‡ (Region) Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù† Ùˆ Enable Ø±Ø§ Ø¨Ø²Ù†
ğŸ“Œ Û². Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬ Firebase Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡
ğŸ”¹ Ø¯Ø± Ù…Ø­ÛŒØ· Replit (ÛŒØ§ Ù„ÙˆÚ©Ø§Ù„)ØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù† ØªØ§ Firebase SDK Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ† Ù†ØµØ¨ Ø´ÙˆØ¯:

bash
Copy
Edit
pip install firebase-admin
ğŸ“Œ Û³. Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Firebase
ğŸ”¹ Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ FirebaseØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙØ§ÛŒÙ„ JSON Service Account Ø¯Ø§Ø±ÛŒÙ…:

Ø¨Ù‡ Firebase Console Ø¨Ø±Ùˆ
Ø¨Ù‡ Project Settings > Service Accounts Ø¨Ø±Ùˆ
Ø±ÙˆÛŒ Generate new private key Ú©Ù„ÛŒÚ© Ú©Ù† Ùˆ ÙØ§ÛŒÙ„ JSON Ø±Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†
Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù† (Ù†Ø§Ù… Ø¢Ù† Ø±Ø§ firebase_config.json Ø¨Ú¯Ø°Ø§Ø±)
ğŸ“Œ Ù…Ø±Ø§Ù‚Ø¨ Ø¨Ø§Ø´! Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø±Ø§ Ø¨Ù‡â€ŒÙ‡ÛŒÚ†â€ŒÙˆØ¬Ù‡ Ø¯Ø± GitHub Ø¢Ù¾Ù„ÙˆØ¯ Ù†Ú©Ù†!

ğŸ“Œ Û´. ØªÙ†Ø¸ÛŒÙ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Firestore
ğŸ”¹ ÛŒÚ© ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ù†Ø§Ù… firebase_db.py Ø¨Ø³Ø§Ø² Ùˆ Ø§ÛŒÙ† Ú©Ø¯ Ø±Ø§ Ø¯Ø± Ø¢Ù† Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡:

python
Copy
Edit
import firebase_admin
from firebase_admin import credentials, firestore

# Ø§ØªØµØ§Ù„ Ø¨Ù‡ Firebase Ø¨Ø§ ÙØ§ÛŒÙ„ JSON
cred = credentials.Certificate("firebase_config.json")
firebase_admin.initialize_app(cred)

# Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Firestore
db = firestore.client()

# Ú©Ù„Ú©Ø³ÛŒÙˆÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
users_collection = db.collection("users")

def save_user_interaction(user_id, message, response):
    """ Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ§Ù… Ùˆ Ù¾Ø§Ø³Ø® Ø¯Ø± Firebase """
    user_ref = users_collection.document(user_id)
    user_data = user_ref.get().to_dict()
    
    if user_data:
        history = user_data.get("history", [])
    else:
        history = []

    history.append({"message": message, "response": response})

    user_ref.set({"history": history}, merge=True)

def get_user_history(user_id):
    """ Ø¯Ø±ÛŒØ§ÙØª ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒÛŒ Ú†Øª Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Firebase """
    user_ref = users_collection.document(user_id)
    user_data = user_ref.get().to_dict()
    
    if user_data and "history" in user_data:
        return "\n".join([f"Ú©Ø§Ø±Ø¨Ø±: {h['message']} | Ù¾Ø§Ø³Ø®: {h['response']}" for h in user_data["history"][-5:]])
    return "ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª."
ğŸ”¹ Ø§ÛŒÙ† Ú©Ø¯ Ú†Ù‡ Ú©Ø§Ø±ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŸ
âœ… save_user_interaction: Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ AI Ø±Ø§ Ø¯Ø± Firebase Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
âœ… get_user_history: Ø¢Ø®Ø±ÛŒÙ† Ûµ Ù…Ú©Ø§Ù„Ù…Ù‡â€ŒÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø§Ø¦Ù‡â€ŒÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ù‡ØªØ± Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.

ğŸ“Œ Ûµ. Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ MongoDB Ø¨Ø§ Firebase Ø¯Ø± main.py
ğŸ”¹ Ø¯Ø± main.pyØŒ Ø¨Ù‡â€ŒØ¬Ø§ÛŒ database.py Ø§Ø² firebase_db.py Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†:

python
Copy
Edit
from fastapi import FastAPI, Depends, HTTPException
from pydantic import BaseModel
import openai
from firebase_db import save_user_interaction, get_user_history  # ØªØºÛŒÛŒØ± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª

app = FastAPI()

openai.api_key = "YOUR_OPENAI_API_KEY"

class ChatRequest(BaseModel):
    user_id: str
    user_input: str

@app.post("/chat")
async def chat_with_ai(request: ChatRequest):
    """ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø± Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ GPT-4 Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒÛŒ Ø§Ùˆ """
    
    user_history = get_user_history(request.user_id)  # Ø¯Ø±ÛŒØ§ÙØª ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒÛŒ Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Firebase

    prompt = f"ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒÛŒ Ú©Ø§Ø±Ø¨Ø±:\n{user_history}\n\nÚ©Ø§Ø±Ø¨Ø±: {request.user_input}\n\nÙ¾Ø§Ø³Ø® Ù…Ù†Ø§Ø³Ø¨ Ø§Ø±Ø§Ø¦Ù‡ Ú©Ù†:"
    
    try:
        response = openai.ChatCompletion.create(
            model="gpt-4-turbo",
            messages=[{"role": "user", "content": prompt}],
            temperature=0.7
        )
        ai_response = response["choices"][0]["message"]["content"]

        # Ø°Ø®ÛŒØ±Ù‡ ØªØ¹Ø§Ù…Ù„ Ø¯Ø± Firebase
        save_user_interaction(request.user_id, request.user_input, ai_response)

        return {"response": ai_response}
    
    except Exception as e:
        return {"error": str(e)}
ğŸ“Œ Û¶. Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø±ÙˆØ±
âœ… Ø³Ø±ÙˆØ± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†:

bash
Copy
Edit
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
âœ… ØªØ³Øª Ø¯Ø± Postman ÛŒØ§ Curl:

bash
Copy
Edit
curl -X POST "http://localhost:8000/chat" -H "Content-Type: application/json" -d '{"user_id": "user123", "user_input": "Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù‡ÙØªÙ‡ Ú†Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¯Ø§Ø±ÛŒØŸ"}'
ğŸ“Œ Ø­Ø§Ù„Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø± Firebase Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯!

